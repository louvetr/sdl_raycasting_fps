#ifndef MAP_H
#define MAP_H

#include <stdio.h>
#include <stdlib.h>
#include <SDL2/SDL.h>

#include "main.hpp"

#define MAP_WIDTH   32
#define MAP_HEIGHT  32

static int rawMap[MAP_HEIGHT][MAP_WIDTH] = {
    {0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10},
    {0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x10},
    {0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x10},
    {0x10,0x00,0x20,0x20,0x20,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x10},
    {0x10,0x00,0x20,0x20,0x20,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x70,0x00,0x00,0x70,0x00,0x00,0x70,0x00,0x10},
    {0x10,0x00,0x20,0x20,0x20,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x10},
    {0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x04,0x00,0x50,0x50,0x50,0x50,0x50,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x10},
    {0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x04,0x00,0x50,0x02,0x02,0x02,0x50,0x00,0x00,0x00,0x70,0x00,0x00,0x70,0x00,0x00,0x70,0x00,0x10},
    {0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x04,0x00,0x50,0x02,0x50,0x02,0x50,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x10},
    {0x10,0x00,0x30,0x30,0x30,0x03,0x03,0x30,0x30,0x30,0x00,0x00,0x04,0x04,0x00,0x50,0x02,0x50,0x02,0x50,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x10},
    {0x10,0x00,0x30,0x03,0x03,0x03,0x03,0x03,0x03,0x30,0x00,0x00,0x04,0x04,0x00,0x50,0x02,0x50,0x02,0x50,0x00,0x00,0x00,0x70,0x00,0x00,0x70,0x00,0x00,0x70,0x00,0x10},
    {0x10,0x00,0x30,0x03,0x03,0x03,0x03,0x03,0x03,0x30,0x00,0x00,0x04,0x04,0x00,0x50,0x02,0x50,0x02,0x50,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x10},
    {0x10,0x00,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x04,0x04,0x04,0x04,0x00,0x50,0x02,0x50,0x02,0x50,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x10},
    {0x10,0x00,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x04,0x04,0x04,0x04,0x00,0x50,0x02,0x50,0x02,0x50,0x00,0x00,0x00,0x70,0x00,0x00,0x70,0x00,0x00,0x70,0x00,0x10},
    {0x10,0x00,0x30,0x03,0x03,0x03,0x03,0x03,0x03,0x30,0x00,0x00,0x04,0x04,0x00,0x50,0x02,0x50,0x02,0x50,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x10},
    {0x10,0x00,0x30,0x03,0x03,0x03,0x03,0x03,0x03,0x30,0x00,0x00,0x04,0x04,0x04,0x02,0x02,0x50,0x02,0x02,0x04,0x04,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x10},
    {0x10,0x00,0x30,0x30,0x30,0x03,0x03,0x30,0x30,0x30,0x00,0x00,0x04,0x04,0x00,0x50,0x50,0x50,0x50,0x50,0x00,0x00,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x10},
    {0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x10},
    {0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x10},
    {0x10,0x00,0x40,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x00,0x00,0x10},
    {0x10,0x00,0x40,0x40,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x00,0x00,0x10},
    {0x10,0x00,0x00,0x40,0x40,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x60,0x04,0x00,0x00,0x00,0x00,0x00,0x04,0x00,0x00,0x10},
    {0x10,0x00,0x00,0x00,0x40,0x40,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x60,0x04,0x00,0x10,0x10,0x10,0x10,0x01,0x10,0x10,0x10},
    {0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x60,0x04,0x00,0x10,0x01,0x01,0x01,0x01,0x01,0x01,0x10},
    {0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x40,0x00,0x00,0x00,0x00,0x04,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x60,0x60,0x04,0x00,0x10,0x01,0x01,0x01,0x01,0x01,0x01,0x10},
    {0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x40,0x40,0x00,0x00,0x00,0x04,0x04,0x00,0x00,0x00,0x00,0x60,0x60,0x60,0x60,0x04,0x00,0x10,0x01,0x01,0x01,0x01,0x01,0x01,0x10},
    {0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x40,0x40,0x00,0x00,0x04,0x04,0x00,0x00,0x00,0x60,0x60,0x60,0x60,0x60,0x04,0x00,0x10,0x01,0x01,0x01,0x01,0x01,0x01,0x10},
    {0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x40,0x40,0x00,0x04,0x04,0x60,0x60,0x60,0x60,0x60,0x60,0x60,0x60,0x04,0x04,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x10},
    {0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x40,0x40,0x04,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x10,0x01,0x01,0x01,0x01,0x01,0x01,0x10},
    {0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x10,0x01,0x01,0x01,0x01,0x01,0x01,0x10},
    {0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x10,0x01,0x01,0x01,0x01,0x01,0x01,0x10},
    {0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10},
};


enum mapBlockType {
    MBTYPE_UNKNOWN = 0,
    MBTYPE_FLOOR,
    MBTYPE_WALL,
};


/////////////////////////////////////////////////////////////////////////////////////////



class mapBlock {

 public:
    mapBlockType type;

    Uint8 *textureFloor;
    int textureFloorWidth;
    int textureFloorHeight;
    int textureFloorTileFactor;

    Uint8 *textureWall;
    int textureWallWidth;
    int textureWallHeight;
    int textureWallTileFactor;

public:
    mapBlock();
    mapBlock(mapBlockType t);
    ~mapBlock();
    void setType(mapBlockType t);
    void setTextureFloor(Uint8 *tFloor, int tFloorWidth, int tFloorHeight, int tFloorTileFactor);
    void setTextureWall(Uint8 *tWall, int tWallWidth, int tWallHeight, int tWallTileFactor);
};

class mapBlockFloor : public mapBlock{

 public:
  Uint8 *textureFloor;
  int textureFloorWidth;
  int textureFloorHeight;
  int textureFloorTileFactor;

public:
    mapBlockFloor(Uint8 *tFloor, int tFloorWidth, int tFloorHeight, int tFloorTileFactor);
    ~mapBlockFloor();

};

class mapBlockWall : public mapBlock{

 public:
  Uint8 *textureWall;
  int textureWallWidth;
  int textureWallHeight;
  int textureWallTileFactor;

public:
    mapBlockWall(Uint8 *tWall, int tWallWidth, int tWallHeight, int tWallTileFactor);
    ~mapBlockWall();

};


/////////////////////////////////////////////////////////////////////////////////////////
class mapFloor {

 public:
    mapBlock **blocks;

public:
    mapFloor(int w, int h);
    ~mapFloor();
};

/////////////////////////////////////////////////////////////////////////////////////////
class mapObj {

 public:
    int mapWidth;
    int mapHeight;
    int nbFloors;
    mapFloor *floors;

public:
    mapObj(int w, int h, int z);
    ~mapObj();
    void build();

};

#endif